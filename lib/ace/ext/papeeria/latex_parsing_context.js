// Generated by CoffeeScript 1.10.0
(function() {
  define(function(require, exports, module) {
    var EQUATION_STATE, LIST_STATE, PapeeriaLatexHighlightRules, getContext, getNestedListDepth;
    PapeeriaLatexHighlightRules = require('./papeeria_latex_highlight_rules');
    EQUATION_STATE = PapeeriaLatexHighlightRules.EQUATION_STATE;
    LIST_STATE = PapeeriaLatexHighlightRules.LIST_STATE;

    /*
     * @param {Number} row
     * 
     * Returns context at row.
     */
    getContext = function(session, row) {
      var states;
      states = session.getState(row);
      if (Array.isArray(states)) {
        return states[states.length - 1];
      } else {
        return states;
      }
    };
    getNestedListDepth = function(session, row) {
      var count, i, len, state, states;
      states = session.getState(row);
      count = 0;
      for (i = 0, len = states.length; i < len; i++) {
        state = states[i];
        if (state === LIST_STATE) {
          count++;
        }
      }
      return count - 1;
    };
    return exports.ContextHelper = {
      getContext: getContext,
      getNestedListDepth: getNestedListDepth
    };
  });

}).call(this);
