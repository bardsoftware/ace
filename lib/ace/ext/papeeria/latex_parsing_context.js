// Generated by CoffeeScript 1.12.6
(function() {
  define(function(require, exports, module) {
    var COMMENT_CONTEXT, COMMENT_TOKENTYPE, CONTEXTS_FOR_TOKENTYPES, CONTEXT_TOKENTYPES, ENVIRONMENT_CONTEXT, ENVIRONMENT_TOKENTYPE, EQUATION_CONTEXT, EQUATION_TOKENTYPE, ESCAPE_TOKENTYPE, LIST_CONTEXT, LIST_TOKENTYPE, LPAREN_TOKENTYPE, PapeeriaLatexHighlightRules, RPAREN_TOKENTYPE, SPECIFIC_TOKEN_FOR_STATE, START_CONTEXT, getContext, isType;
    PapeeriaLatexHighlightRules = require("ace/ext/papeeria/papeeria_latex_highlight_rules");
    COMMENT_TOKENTYPE = PapeeriaLatexHighlightRules.COMMENT_TOKENTYPE, ESCAPE_TOKENTYPE = PapeeriaLatexHighlightRules.ESCAPE_TOKENTYPE, LPAREN_TOKENTYPE = PapeeriaLatexHighlightRules.LPAREN_TOKENTYPE, RPAREN_TOKENTYPE = PapeeriaLatexHighlightRules.RPAREN_TOKENTYPE, LIST_TOKENTYPE = PapeeriaLatexHighlightRules.LIST_TOKENTYPE, EQUATION_TOKENTYPE = PapeeriaLatexHighlightRules.EQUATION_TOKENTYPE, ENVIRONMENT_TOKENTYPE = PapeeriaLatexHighlightRules.ENVIRONMENT_TOKENTYPE, SPECIFIC_TOKEN_FOR_STATE = PapeeriaLatexHighlightRules.SPECIFIC_TOKEN_FOR_STATE;
    exports.COMMENT_CONTEXT = COMMENT_CONTEXT = COMMENT_TOKENTYPE;
    exports.EQUATION_CONTEXT = EQUATION_CONTEXT = EQUATION_TOKENTYPE;
    exports.ENVIRONMENT_CONTEXT = ENVIRONMENT_CONTEXT = ENVIRONMENT_TOKENTYPE;
    exports.LIST_CONTEXT = LIST_CONTEXT = LIST_TOKENTYPE;
    exports.START_CONTEXT = START_CONTEXT = "start";
    CONTEXT_TOKENTYPES = [COMMENT_TOKENTYPE, EQUATION_TOKENTYPE, ENVIRONMENT_TOKENTYPE, LIST_TOKENTYPE];
    CONTEXTS_FOR_TOKENTYPES = {};
    CONTEXTS_FOR_TOKENTYPES[COMMENT_TOKENTYPE] = COMMENT_CONTEXT;
    CONTEXTS_FOR_TOKENTYPES[EQUATION_TOKENTYPE] = EQUATION_CONTEXT;
    CONTEXTS_FOR_TOKENTYPES[ENVIRONMENT_TOKENTYPE] = ENVIRONMENT_CONTEXT;
    CONTEXTS_FOR_TOKENTYPES[LIST_TOKENTYPE] = LIST_CONTEXT;
    isType = function(token, type) {
      return token.type.indexOf(type) > -1;
    };
    getContext = function(session, row, column) {
      var contextTokentype, i, len, nextColumn, nextRow, nextToken, prevState, ref, token, tokentype;
      if (column > 0) {
        ref = session.doc.indexToPosition(session.doc.positionToIndex({
          row: row,
          column: column
        }, row) + 1, row), nextRow = ref.row, nextColumn = ref.column;
        token = session.getTokenAt(row, column);
        nextToken = session.getTokenAt(nextRow, nextColumn);
        for (i = 0, len = CONTEXT_TOKENTYPES.length; i < len; i++) {
          contextTokentype = CONTEXT_TOKENTYPES[i];
          if (isType(token, contextTokentype) || (nextToken != null) && isType(nextToken, contextTokentype)) {
            return CONTEXTS_FOR_TOKENTYPES[contextTokentype];
          }
        }
      } else {
        if (row > 0) {
          prevState = session.getState(row - 1);
          prevState = (typeof prevState === "string" ? prevState : prevState[prevState.length - 1]);
          tokentype = SPECIFIC_TOKEN_FOR_STATE[prevState];
          return (tokentype != null ? CONTEXTS_FOR_TOKENTYPES[tokentype] : START_CONTEXT);
        }
      }
      return START_CONTEXT;
    };
    exports.getContext = getContext;
    exports.isType = isType;
  });

}).call(this);

//# sourceMappingURL=latex_parsing_context.js.map
